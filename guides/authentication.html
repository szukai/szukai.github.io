<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Authentication Guide | Kloudless Custom Connector</title>
    <meta name="description" content="Custom Connector Documentation">
    <link rel="icon" href="/kl-logo.png">
    <link rel="preload" href="/assets/css/0.styles.b4b7b21d.css" as="style"><link rel="preload" href="/assets/js/app.08ecdd18.js" as="script"><link rel="preload" href="/assets/js/2.7990bef6.js" as="script"><link rel="preload" href="/assets/js/6.43f9c60b.js" as="script"><link rel="prefetch" href="/assets/js/10.1669d027.js"><link rel="prefetch" href="/assets/js/11.0d59ae82.js"><link rel="prefetch" href="/assets/js/12.0ecea0e1.js"><link rel="prefetch" href="/assets/js/13.fc5ed85c.js"><link rel="prefetch" href="/assets/js/3.5436a352.js"><link rel="prefetch" href="/assets/js/4.08ff2735.js"><link rel="prefetch" href="/assets/js/5.dd41557f.js"><link rel="prefetch" href="/assets/js/7.adeebfa7.js"><link rel="prefetch" href="/assets/js/8.4ed0f2ff.js"><link rel="prefetch" href="/assets/js/9.95d3fa12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4b7b21d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Kloudless Custom Connector</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Intro</a></div><div class="nav-item"><a href="/guides/quickstart-storage.html" class="nav-link">Guides</a></div><div class="nav-item"><a href="/reference/kspec-ref.html" class="nav-link">Reference</a></div><div class="nav-item"><a href="https://kloudless.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kloudless API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Intro</a></div><div class="nav-item"><a href="/guides/quickstart-storage.html" class="nav-link">Guides</a></div><div class="nav-item"><a href="/reference/kspec-ref.html" class="nav-link">Reference</a></div><div class="nav-item"><a href="https://kloudless.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Kloudless API
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/quickstart-storage.html" class="sidebar-link">Quickstart</a></li><li><a href="/guides/transforms.html" class="sidebar-link">Transforms and Filters</a></li><li><a href="/guides/authentication.html" class="active sidebar-link">Authentication Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/authentication.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/guides/authentication.html#openapi-definition-file" class="sidebar-link">OpenAPI Definition File</a></li><li class="sidebar-sub-header"><a href="/guides/authentication.html#kloudless-specification-files" class="sidebar-link">Kloudless Specification Files</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/authentication.html#basic-authentication" class="sidebar-link">Basic Authentication</a></li><li class="sidebar-sub-header"><a href="/guides/authentication.html#oauth2" class="sidebar-link">OAuth2</a></li></ul></li><li class="sidebar-sub-header"><a href="/guides/authentication.html#authentication-oauth2-transforms" class="sidebar-link">Authentication (OAuth2) Transforms</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="authentication-guide"><a href="#authentication-guide" class="header-anchor">#</a> Authentication Guide</h1> <p></p><div class="table-of-contents"><ul><li><a href="#overview">Overview</a></li><li><a href="#openapi-definition-file">OpenAPI Definition File</a></li><li><a href="#kloudless-specification-files">Kloudless Specification Files</a><ul><li><a href="#basic-authentication">Basic Authentication</a></li><li><a href="#oauth2">OAuth2</a></li></ul></li><li><a href="#authentication-oauth2-transforms">Authentication (OAuth2) Transforms</a></li></ul></div><p></p> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>Just like standard Kloudless connectors, Custom Connectors will also need to be
configured to be able to provide proper connectivity to the desired service.
Authentication can be configured for services by setting the following YAML
mappings in both KSpec and OAPI specification files.</p> <h2 id="openapi-definition-file"><a href="#openapi-definition-file" class="header-anchor">#</a> OpenAPI Definition File</h2> <p>Part of the Kloudless Custom Connector authentication configuration parameters
are configured with the OpenAPI definition file.</p> <p>This includes scopes, authentication flow, url paths, and more.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Only one <code>securityDefinitions</code> mapping will accepted.</p></div> <p>Here's an example from our <a href="#/quickstart/storage">Gdrive quickstart</a>:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">securityDefinitions</span><span class="token punctuation">:</span>
    <span class="token key atrule">oauth2</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> oauth2
        <span class="token key atrule">scopes</span><span class="token punctuation">:</span>
            <span class="token key atrule">&quot;https://www.googleapis.com/auth/userinfo.email&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Read user email&quot;</span>
            <span class="token key atrule">&quot;https://www.googleapis.com/auth/userinfo.profile&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Read user public profile&quot;</span>
            <span class="token key atrule">&quot;https://www.googleapis.com/auth/drive&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Write files&quot;</span>
            <span class="token key atrule">&quot;https://www.googleapis.com/auth/drive.file&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Manage files&quot;</span>
            <span class="token key atrule">&quot;https://www.googleapis.com/auth/drive.metadata&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Manage metadata of files&quot;</span>
        <span class="token key atrule">flow</span><span class="token punctuation">:</span> accessCode
        <span class="token key atrule">authorizationUrl</span><span class="token punctuation">:</span> <span class="token string">&quot;https://accounts.google.com/o/oauth2/v2/auth&quot;</span>
        <span class="token key atrule">tokenUrl</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.googleapis.com/oauth2/v4/token&quot;</span>
        <span class="token key atrule">x-request-token-params</span><span class="token punctuation">:</span>
            <span class="token key atrule">access_type</span><span class="token punctuation">:</span> offline
            <span class="token key atrule">prompt</span><span class="token punctuation">:</span> consent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>More details are available on how
<a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener noreferrer">OpenAPI works with OAuth2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
at the <a href="https://swagger.io/docs/specification" target="_blank" rel="noopener noreferrer">OpenAPI website<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="kloudless-specification-files"><a href="#kloudless-specification-files" class="header-anchor">#</a> Kloudless Specification Files</h2> <h3 id="basic-authentication"><a href="#basic-authentication" class="header-anchor">#</a> Basic Authentication</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">authentication</span><span class="token punctuation">:</span>
    <span class="token key atrule">pre_auth</span><span class="token punctuation">:</span>
        <span class="token key atrule">instructions</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
            &lt;p&gt;
              Please provide your JIRA account's login and
              &lt;a href=&quot;https://id.atlassian.com/manage/api-tokens&quot; target=&quot;_blank&quot;&gt;API Token&lt;/a&gt;.
            &lt;/p&gt;</span>
        <span class="token key atrule">fields</span><span class="token punctuation">:</span>
            <span class="token key atrule">username</span><span class="token punctuation">:</span>
                <span class="token key atrule">friendly_name</span><span class="token punctuation">:</span> Email address
                <span class="token key atrule">input_type</span><span class="token punctuation">:</span> email
                <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">password</span><span class="token punctuation">:</span>
                <span class="token key atrule">friendly_name</span><span class="token punctuation">:</span> API Token
                <span class="token key atrule">input_type</span><span class="token punctuation">:</span> password
                <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">domain</span><span class="token punctuation">:</span>
                <span class="token key atrule">friendly_name</span><span class="token punctuation">:</span> Domain
                <span class="token key atrule">input_type</span><span class="token punctuation">:</span> text
                <span class="token key atrule">required</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>If using basic authorization, a <code>pre-auth</code> mapping with the pre-authorization
form fields is needed instead of a transforms. Based on the example above, the pre-authorization page for the custom connector generated would look something
like:</p> <p><img src="/demo-connector-auth.png" alt="Connector Basic Auth"></p> <p>The description for the pre-auth screen can be configured with the
<code>instructions</code> mapping, and form input fields inside <code>fields</code>.</p> <h3 id="oauth2"><a href="#oauth2" class="header-anchor">#</a> OAuth2</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">authentication</span><span class="token punctuation">:</span>
    <span class="token key atrule">handle_response</span><span class="token punctuation">:</span> access_token
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>If using OAuth2, <code>handle_response: access_token</code> with the appropriately defined
<a href="#Authentication-OAuth2-Transforms">transforms</a> should suffice. <code>access_token</code>
is the name of transform that will parse the token response to the required
format.</p> <h2 id="authentication-oauth2-transforms"><a href="#authentication-oauth2-transforms" class="header-anchor">#</a> Authentication (OAuth2) Transforms</h2> <p>Below is an example of a the <code>access_token</code> transforms.
Here, the request's <code>data['access_token']</code> is mapped to the <code>access_token</code>
attribute, and <code>data['expires_in']</code> is run through a filter to convert it to
a compatible timestamp.</p> <p>Check out the <a href="transforms">Transforms Guide</a> for more on how
transforms work.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">transforms</span><span class="token punctuation">:</span>
    <span class="token key atrule">access_token</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        access_token: {{data.access_token}}
        expiry: {{data.expires_in|expires_in_to_expiry}}
        refresh_token: {{data.refresh_token}}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The Kloudless Custom Connector will look for the following attributes when
handling OAuth2 authentication:</p> <h4 id="access-token"><a href="#access-token" class="header-anchor">#</a> access_token</h4> <ul><li>type: string</li> <li>required</li></ul> <p>Access token string.</p> <h4 id="expiry"><a href="#expiry" class="header-anchor">#</a> expiry</h4> <ul><li>type: string</li> <li>optional</li></ul> <p>Access token expiry time in <a href="https://en.wikipedia.org/wiki/Unix_time" target="_blank" rel="noopener noreferrer">Unix timestamp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
format.</p> <h4 id="refresh-token"><a href="#refresh-token" class="header-anchor">#</a> refresh_token</h4> <ul><li>type: string</li> <li>optional</li></ul> <p>Refresh token string.</p> <h4 id="refresh-token-expiry"><a href="#refresh-token-expiry" class="header-anchor">#</a> refresh_token_expiry</h4> <ul><li>type: string</li> <li>optional</li></ul> <p>Refresh token expiry time.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/guides/transforms.html" class="prev">Transforms and Filters</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.08ecdd18.js" defer></script><script src="/assets/js/2.7990bef6.js" defer></script><script src="/assets/js/6.43f9c60b.js" defer></script>
  </body>
</html>
